<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <title>Fast Map</title>

  <meta name="generator" content="Hugo 0.80.0" />

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/themify-icons/themify-icons.css">

  <!-- highlight -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/highlight/hybrid.css">

  <!--Favicon-->
  <link rel="icon" href="https://php-etl.github.io/documentation/images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
  
  <style>
  :root{
    --primary-color: #22014f;
    --body-color:#ddd;
    --text-color:#666;
    --text-color-dark:#333;
    --text-color-light:#eee;
    --white-color:#eee;
    --light-color:#fe8507;
    --font-family:Lato;
  }
  </style>

<!-- Main Stylesheet -->

<link href="https://php-etl.github.io/documentation/css/style.min.css" rel="stylesheet" media="screen"/>

<!-- jquiry -->
<script src="https://php-etl.github.io/documentation/plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="https://php-etl.github.io/documentation/plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="https://php-etl.github.io/documentation/plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="https://php-etl.github.io/documentation/plugins/match-height/jquery.matchHeight-min.js"></script>

<!-- highlight -->
<script src="https://php-etl.github.io/documentation/plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</head>

  
  <body>
    
    <!-- header -->
    <header class="shadow-bottom sticky-top bg-white">
      <nav class="navbar navbar-expand-md navbar-light">
  <div class="container">
    <a class="navbar-brand px-2" href="/documentation">
      
      
      
      
      <div class="navbar-brand">
        <img class="img-fluid" src="https://php-etl.github.io/documentation/logo-web.svg" alt="Middleware"> Middleware
      </div>
      
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link text-dark" href="/documentation">Home</a>
        </li>
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Installation
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/system-requirements">System Requirements</a>
            
            <a class="dropdown-item" href="/documentation/installation/bare-metal">Bare metal</a>
            
            <a class="dropdown-item" href="/documentation/installation/symfony">Symfony</a>
            
            <a class="dropdown-item" href="/documentation/installation/laravel">Laravel</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Packages
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/components/pipeline">Pipeline</a>
            
            <a class="dropdown-item" href="/documentation/components/fast-map">Fast Map</a>
            
            <a class="dropdown-item" href="/documentation/components/satellite">Satellite</a>
            
            <a class="dropdown-item" href="/documentation/components/batch">Batch</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Framework
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/framework/contracts">Contracts</a>
            
            <a class="dropdown-item" href="/documentation/framework/metadata">Metadata</a>
            
            <a class="dropdown-item" href="/documentation/framework/promise">Promise</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Connectivity
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/connectivity/openapi">Open API</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/json-schema">JSON schema</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/akeneo">Akeneo</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/database">SQL database</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/csv">CSV files</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/spreadsheet">Spreadsheet files</a>
            
          </div>
        </li>
        
        
      </ul>
      
      <select class="lang-list dark" id="select-language"
        onchange="location = this.value;">
        
        
        
        
        
        
        
        
        <option id="en" value="https://php-etl.github.io/documentation/connectivity/fast-map/" selected>English
        </option>
        
        
        
        
        
        
      </select>
      
    </div>
  </div>
</nav>
    </header>
    <!-- /header -->
    
    

<!-- details page -->
<section class="single section-sm pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <ul class="list-styled">
            
            <a class="back-btn" href="/documentation"></a>
            
              
              








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/" title="Connectivity" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/">
    Connectivity
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/json-schema/" title="JSON Schema" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/json-schema/">
    JSON Schema
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/spreadsheet/" title="Spreadsheet" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/spreadsheet/">
    Spreadsheet
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/akeneo/" title="Akeneo" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/akeneo/">
    Akeneo
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/akeneo/expression-language/" title="Akeneo expression language functions" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/akeneo/expression-language/">
    Akeneo expression language functions
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/akeneo/plugin/" title="Akeneo plugin" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/akeneo/plugin/">
    Akeneo plugin
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/csv/" title="CSV" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/connectivity/csv/">
    CSV
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/connectivity/fast-map/" title="Fast Map" class="sidelist
  active">
  <a href="https://php-etl.github.io/documentation/connectivity/fast-map/">
    Fast Map
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


              
            
              
            
              
            
              
            
              
            
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-lg-5 p-4 bg-white">
          <h2 class="mb-5">Fast Map</h2>
          
          <div class="content">




<div style="margin-top: 10px; margin-bottom: 10px;">
<b>FEATURE STATE:</b> <code>Middleware 0.1 [alpha]</code>
</div>


<h3 id="definition-of-a-mapping">Definition of a Mapping</h3>
<p>A mapping is an operation that associates each element of a source of data into
a new format of the same data. By this operation, it is possible to transform
the way the data is represented.</p>
<h3 id="the-abstract-mapping-tree">The Abstract Mapping Tree</h3>
<p>The <em>abstract mapping tree</em> is a representation of the mapping to apply to your
data, in order to transform its representation. It is an internal representation
build for a computer to understand how it will have to change the data representation
during the mapping operation.</p>
<h3 id="components-included">Components included</h3>
<h4 id="the-php-etlfast-map-component">The <code>php-etl/fast-map</code> component</h4>
<p>This component is in charge of representing the Abstract Mapping Tree, and transforming
it into compiled PHP code. This compiled PHP code is the actual code that will do the
mapping, in an optimized way.</p>
<h4 id="the-php-etlfast-map-config-component">The <code>php-etl/fast-map-config</code> component</h4>
<p>This component allows you to configure your mapper according to the type of data you want to input.</p>
<p>If you need to config your mappers, we advise you to use the yml config which will generate a php code usable by the fast-map-config.
This code will then be converted into a machine code that can be used by the fast map package.</p>
<h3 id="installation">Installation</h3>
<pre><code>composer require php-etl/fast-map-plugin
</code></pre><h3 id="configuration">Configuration</h3>
<ul class="nav nav-tabs" id="basic_definition" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#basic_definition-0" role="tab" aria-controls="basic_definition-0" aria-selected="true">YAML</a></li>
	  
		<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#basic_definition-1" role="tab" aria-controls="basic_definition-1">PHP</a></li></ul>
<div class="tab-content" id="basic_definition"><div id="basic_definition-0" class="tab-pane show active" role="tabpanel" aria-labelledby="basic_definition-0">

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">
<span style="color:#f92672">fastmap</span>:
  <span style="color:#f92672">map</span>:
    - <span style="color:#f92672">field</span>: <span style="color:#e6db74">&#39;products&#39;</span>
      <span style="color:#f92672">class</span>: <span style="color:#e6db74">&#39;Model\\Product&#39;</span>
      <span style="color:#f92672">expression</span>: <span style="color:#e6db74">&#39;merge( input[&#34;items&#34;], input[&#34;shippings&#34;] )&#39;</span>
      <span style="color:#f92672">collection</span>:
        - <span style="color:#f92672">field</span>: <span style="color:#e6db74">&#39;sku&#39;</span>
          <span style="color:#f92672">copy</span>: <span style="color:#e6db74">&#39;[sku]&#39;</span>
        - <span style="color:#f92672">field</span>: <span style="color:#e6db74">&#39;price&#39;</span>
          <span style="color:#f92672">expression</span>: <span style="color:#e6db74">&#39;input[&#34;price&#34;]&#39;</span>
          <span style="color:#f92672">class</span>: <span style="color:#e6db74">&#39;Model\\Price&#39;</span>
          <span style="color:#f92672">object</span>:
            - <span style="color:#f92672">field</span>: <span style="color:#e6db74">&#39;amount&#39;</span>
              <span style="color:#f92672">expression</span>: <span style="color:#e6db74">&#39;input[&#34;value&#34;]&#39;</span>
            - <span style="color:#f92672">field</span>: <span style="color:#e6db74">&#39;currency&#39;</span>
              <span style="color:#f92672">expression</span>: <span style="color:#e6db74">&#39;input[&#34;currency&#34;]&#39;</span>
</code></pre></div></div>
  <div id="basic_definition-1" class="tab-pane" role="tabpanel" aria-labelledby="basic_definition-1">

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">
<span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\FastMapConfig\CompositeBuilder</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\FastMapConfig\ObjectBuilder</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\FastMap\Compiler</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\FastMap\PropertyAccess\EmptyPropertyPath</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Symfony\Component\ExpressionLanguage\ExpressionFunction</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Model\Product</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Model\Price</span>;

$mapper <span style="color:#f92672">=</span> (<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ObjectBuilder</span>(<span style="color:#a6e22e">Order</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#66d9ef">null</span>, $interpreter))
 <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>()
     <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">collection</span>(<span style="color:#e6db74">&#39;products&#39;</span>, <span style="color:#e6db74">&#39;merge( input[&#34;items&#34;], input[&#34;shippings&#34;] )&#39;</span>, <span style="color:#a6e22e">Product</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>)
         <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>()
             <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">copy</span>(<span style="color:#e6db74">&#39;sku&#39;</span>, <span style="color:#e6db74">&#39;[sku]&#39;</span>)
             <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">object</span>(<span style="color:#e6db74">&#39;price&#39;</span>, <span style="color:#e6db74">&#39;input[&#34;price&#34;]&#39;</span>, <span style="color:#a6e22e">Price</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>)
                 <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>()
                     <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#39;amount&#39;</span>, <span style="color:#e6db74">&#39;input[&#34;value&#34;]&#39;</span>)
                     <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#39;currency&#39;</span>, <span style="color:#e6db74">&#39;input[&#34;currency&#34;]&#39;</span>)
                 <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">end</span>()
             <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">end</span>()
         <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">end</span>()
     <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">end</span>()
 <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">end</span>()
 <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">getMapper</span>();
</code></pre></div></div></div>

</div>
          
          <p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 12 Jul 2020</p>
          <nav class="pagination mt-3">
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            

            
            <a class="nav nav-prev" href="https://php-etl.github.io/documentation/connectivity/csv/"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">CSV</span></a>
            
            
            <a class="nav nav-next" href="https://php-etl.github.io/documentation/framework/"> <span class="d-none d-md-block">Frameworks</span><i class="ti-arrow-right ml-2"></i></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->





    <!-- footer -->
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
       <p class="mb-md-0 mb-4">The Middleware Documents are copyright © <a href="https://kiboko.fr/">Kiboko</a> 2020, 2021.</p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline">
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="https://php-etl.github.io/documentation/js/script.min.js"></script>
  </body>

</html>
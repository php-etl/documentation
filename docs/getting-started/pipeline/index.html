<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <title>Pipeline</title>

  <meta name="generator" content="Hugo 0.82.0" />

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/themify-icons/themify-icons.css">

  <!-- highlight -->
  <link rel="stylesheet" href="https://php-etl.github.io/documentation/plugins/highlight/hybrid.css">

  <!--Favicon-->
  <link rel="icon" href="https://php-etl.github.io/documentation/images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
  
  <style>
  :root{
    --primary-color: #22014f;
    --primary-color-lighten: #f2e9fe;
    --secondary-color:#fe8507;
    --body-color:#ddd;
    --text-color:#666;
    --text-color-dark:#333;
    --text-color-light:#eee;
    --white-color:#eee;
    --font-family:Lato;
  }
  </style>

<!-- Main Stylesheet -->

<link href="https://php-etl.github.io/documentation/css/style.min.css" rel="stylesheet" media="screen"/>

<!-- jquiry -->
<script src="https://php-etl.github.io/documentation/plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="https://php-etl.github.io/documentation/plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="https://php-etl.github.io/documentation/plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="https://php-etl.github.io/documentation/plugins/match-height/jquery.matchHeight-min.js"></script>

<!-- highlight -->
<script src="https://php-etl.github.io/documentation/plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</head>

  
  <body>
    
    <!-- header -->
    <header class="shadow-bottom sticky-top bg-white">
      <nav class="navbar navbar-expand-md navbar-light">
  <div class="container">
    <a class="navbar-brand px-2" href="/documentation">
      
      
      
      
      <div class="navbar-brand">
        <img class="img-fluid" src="https://php-etl.github.io/documentation/logo-web.svg" alt="Middleware"> Middleware
      </div>
      
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link text-dark" href="/documentation">Home</a>
        </li>
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Getting Started
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/getting-started/setup">Setup</a>
            
            <a class="dropdown-item" href="/documentation/getting-started/satellite">Creating Satellites</a>
            
            <a class="dropdown-item" href="/documentation/getting-started/pipeline">Pipelines</a>
            
            <a class="dropdown-item" href="/documentation/getting-started/workflow">Workflows</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Features
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/feature/services">Declaring services</a>
            
            <a class="dropdown-item" href="/documentation/feature/expression-language">Expression Language</a>
            
            <a class="dropdown-item" href="/documentation/feature/logger">Logging</a>
            
            <a class="dropdown-item" href="/documentation/feature/rejection">Rejection</a>
            
            <a class="dropdown-item" href="/documentation/feature/state">State</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Connectivity
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/documentation/connectivity/akeneo">Akeneo</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/csv">CSV files</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/custom">Custom connector</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/fast-map">FastMap</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/ftp">FTP</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/sftp">SFTP</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/nl-json">NL-JSON</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/spreadsheet">Spreadsheet files</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/sql">SQL database</a>
            
            <a class="dropdown-item" href="/documentation/connectivity/sylius">Sylius</a>
            
          </div>
        </li>
        
        
      </ul>
      
      <select class="lang-list dark" id="select-language"
        onchange="location = this.value;">
        
        
        
        
        
        
        
        
        <option id="en" value="https://php-etl.github.io/documentation/getting-started/pipeline/" selected>English
        </option>
        
        
        
        
        
        
      </select>
      
    </div>
  </div>
</nav>
    </header>
    <!-- /header -->
    
    

<!-- details page -->
<section class="single section-sm pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <ul class="list-styled">
            
            <a class="back-btn" href="/documentation"></a>
            
              
            
              
              








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/" title="Getting-starteds" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/">
    Getting-starteds
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/satellite/" title="Creating Satellite" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/satellite/">
    Creating Satellite
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/satellite/php-objects/" title="PHP Objects" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/satellite/php-objects/">
    PHP Objects
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/satellite/yaml-format/" title="The YAML configuration format" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/satellite/yaml-format/">
    The YAML configuration format
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/pipeline/" title="Pipeline" class="sidelist
  active">
  <a href="https://php-etl.github.io/documentation/getting-started/pipeline/">
    Pipeline
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/setup/" title="Setup" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/setup/">
    Setup
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://php-etl.github.io/documentation/getting-started/workflow/" title="Workflow" class="sidelist
  ">
  <a href="https://php-etl.github.io/documentation/getting-started/workflow/">
    Workflow
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


              
            
              
            
              
            
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-lg-5 p-4 bg-white">
          <h2 class="mb-5">Pipeline</h2>
          
          <div class="content">




<div style="margin-top: 10px; margin-bottom: 10px;">
<b>FEATURE STATE:</b> <code>Middleware 0.1 [alpha]</code>
</div>


<h1 id="pipeline">Pipeline</h1>
<ul>
<li><a href="#what-is-it-">What is it</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#advanced-usage">Advanced Usage</a>
<ul>
<li><a href="#using-expressions">Using expressions</a></li>
<li><a href="#using-services">Using services</a></li>
<li><a href="#adding-logger">Adding logger</a></li>
<li><a href="#adding-rejection">Adding rejection</a></li>
<li><a href="#adding-state">Adding state</a></li>
</ul>
</li>
</ul>
<hr>
<blockquote>
<p>A pipeline is a series of processes, also called steps, that filter or transform data.
The first process takes raw input data, uses it and then
sends the results to the second process, and so on, ending with the final result produced by the last process in progress.</p>
</blockquote>
<p><img src="pipeline.svg" alt="Pipeline schema"></p>
<p>The different steps of our pipeline are <code>extract</code>, <code>transform</code> or <code>load</code> but the transformation step isn&rsquo;t mandatory.</p>
<blockquote>
<p>Tip : It&rsquo;s possible to use multiple transformation steps in a pipeline.</p>
</blockquote>
<h2 id="what-is-it-">What is it ?</h2>
<p>This package allows you to create a micro-service that will be operating a data pipeline.</p>
<h2 id="installation">Installation</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">composer require php-etl/pipeline
</code></pre></div><h2 id="basic-usage">Basic usage</h2>
<p>To define your pipeline, you need to specify which steps will make up the pipeline using the <code>steps</code> option. Each step
contains the configuration of a plugin. For more details, go to the documentation page of the plugin of your choice.</p>
<ul class="nav nav-tabs" id="basic_definition" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#basic_definition-0" role="tab" aria-controls="basic_definition-0" aria-selected="true">YAML</a></li>
	  
		<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#basic_definition-1" role="tab" aria-controls="basic_definition-1">PHP</a></li></ul>
<div class="tab-content" id="basic_definition"><div id="basic_definition-0" class="tab-pane show active" role="tabpanel" aria-labelledby="basic_definition-0">

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">
<span style="color:#f92672">pipeline</span>:
  <span style="color:#f92672">steps</span>:
    - <span style="color:#f92672">csv</span>:
        <span style="color:#f92672">extractor</span>:
          <span style="color:#f92672">file_path</span>: <span style="color:#ae81ff">path/to/file/input.csv</span>
          <span style="color:#f92672">delimiter</span>: <span style="color:#e6db74">&#39;;&#39;</span>
          <span style="color:#f92672">enclosure</span>: <span style="color:#e6db74">&#39;&#34;&#39;</span>
          <span style="color:#f92672">escape</span>: <span style="color:#e6db74">&#39;\\&#39;</span>
    - <span style="color:#f92672">csv</span>:
        <span style="color:#f92672">loader</span>:
          <span style="color:#f92672">file_path</span>: <span style="color:#ae81ff">path/to/file/output.csv</span>
          <span style="color:#f92672">delimiter</span>: <span style="color:#e6db74">&#39;,&#39;</span>
          <span style="color:#f92672">enclosure</span>: <span style="color:#e6db74">&#39;&#34;&#39;</span>
          <span style="color:#f92672">escape</span>: <span style="color:#e6db74">&#39;\\&#39;</span>
</code></pre></div></div>
  <div id="basic_definition-1" class="tab-pane" role="tabpanel" aria-labelledby="basic_definition-1">

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">
<span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\Pipeline\PipelineRunner</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\Pipeline\Pipeline</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\Flow\Csv\Safe\Extractor</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Kiboko\Component\Flow\Csv\Safe\Loader</span>;

<span style="color:#e6db74">/** @var Psr\Log\LoggerInterface $logger */</span> 
$runner <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PipelineRunner</span>();
$pipeline <span style="color:#f92672">=</span> (<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Pipeline</span>($runner))
    <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">extract</span>((<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Extractor</span>(<span style="color:#e6db74">&#39;path/to/file/input.csv&#39;</span>))<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">setLogger</span>($logger))
    <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">load</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Loader</span>(<span style="color:#e6db74">&#39;path/to/file/output.csv&#39;</span>, <span style="color:#a6e22e">delimiter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;,&#39;</span>))
    <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">run</span>();
</code></pre></div></div></div>

<h2 id="advanced-usage">Advanced usage</h2>
<h3 id="using-expressions">Using expressions</h3>
<p>It&rsquo;s possible to use expressions in your pipeline using the <code>expression_language</code> option. To use these expressions,
you need to use our customised Providers which provide the different expressions. For more information, please visit
the <a href="../../feature/expression-language">detailed documentation</a> of the language expressions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">pipeline</span>:
  <span style="color:#f92672">expression_language</span>:
    - <span style="color:#e6db74">&#39;Kiboko\Component\Satellite\ExpressionLanguage\Provider&#39;</span>
</code></pre></div><h3 id="using-services">Using services</h3>
<p>You can use services in your pipeline in the same way as in a traditional Symfony application.</p>
<p>For more details, go to the <a href="../../feature/logger">detailed services documentation</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">pipeline</span>:
  <span style="color:#f92672">services</span>:
    <span style="color:#f92672">App\Service\Bar</span>:
      <span style="color:#f92672">arguments</span>:
        - <span style="color:#e6db74">&#39;my-file.csv&#39;</span>
</code></pre></div><h3 id="adding-logger">Adding logger</h3>
<p>It&rsquo;s possible to add a <code>logger</code> at each step of the pipeline.</p>
<p>For more details, go to the <a href="../../feature/logger">detailed logger documentation</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">satellite</span>:
<span style="color:#75715e"># ...</span>
   <span style="color:#f92672">pipeline</span>:
      <span style="color:#f92672">steps</span>:
      - <span style="color:#f92672">akeneo</span>:
        <span style="color:#75715e"># ...</span>
        <span style="color:#f92672">logger</span>:
          <span style="color:#f92672">channel</span>: <span style="color:#ae81ff">pipeline</span>
          <span style="color:#f92672">destinations</span>:
            - <span style="color:#f92672">elasticsearch</span>:
                <span style="color:#f92672">level</span>: <span style="color:#ae81ff">warning</span>
                <span style="color:#f92672">hosts</span>:
                  - <span style="color:#ae81ff">http://user:password@elasticsearch.example.com:9200</span>
</code></pre></div><h3 id="adding-rejection">Adding rejection</h3>
<p>It&rsquo;s possible to add a <code>rejection</code> at each step of the pipeline.</p>
<p>For more details, go to the <a href="../../feature/rejection">detailed rejection documentation</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">satellite</span>:
<span style="color:#75715e"># ...</span>
   <span style="color:#f92672">pipeline</span>:
      <span style="color:#f92672">steps</span>:
      - <span style="color:#f92672">akeneo</span>:
        <span style="color:#75715e"># ...</span>
        <span style="color:#f92672">rejection</span>:
          <span style="color:#f92672">destinations</span>:
            - <span style="color:#f92672">rabbitmq</span>:
                <span style="color:#f92672">host</span>: <span style="color:#ae81ff">rabbitmq.example.com</span>
                <span style="color:#f92672">vhost</span>: <span style="color:#ae81ff">/</span>
                <span style="color:#f92672">topic</span>: <span style="color:#ae81ff">foo.rejects</span>
</code></pre></div><h3 id="adding-state">Adding state</h3>
<p>It&rsquo;s possible to add a <code>state</code> at each step of the pipeline.</p>
<p>For more details, go to the <a href="../../feature/state">detailed state documentation</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">satellite</span>:
<span style="color:#75715e"># ...</span>
   <span style="color:#f92672">pipeline</span>:
      <span style="color:#f92672">steps</span>:
      - <span style="color:#f92672">akeneo</span>:
        <span style="color:#75715e"># ...</span>
        <span style="color:#f92672">state</span>:
          <span style="color:#f92672">destinations</span>:
            - <span style="color:#f92672">rabbitmq</span>:
                <span style="color:#f92672">host</span>: <span style="color:#ae81ff">rabbitmq.example.com</span>
                <span style="color:#f92672">vhost</span>: <span style="color:#ae81ff">/</span>
                <span style="color:#f92672">topic</span>: <span style="color:#ae81ff">foo.rejects</span>
</code></pre></div></div>
          
          <p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 12 Jul 2020</p>
          <nav class="pagination mt-3">
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            

            
            <a class="nav nav-prev" href="https://php-etl.github.io/documentation/getting-started/"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">Getting-starteds</span></a>
            
            
            <a class="nav nav-next" href="https://php-etl.github.io/documentation/getting-started/satellite/"> <span class="d-none d-md-block">Creating Satellite</span><i class="ti-arrow-right ml-2"></i></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->






    <!-- footer -->
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
       <p class="mb-md-0 mb-4">The Middleware Documents are copyright © <a href="https://kiboko.fr/">Kiboko</a> 2020, 2021.</p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline">
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="https://php-etl.github.io/documentation/js/script.min.js"></script>
  </body>

</html>